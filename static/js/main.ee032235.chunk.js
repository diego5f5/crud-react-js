(this["webpackJsonpcadastro-produtos"]=this["webpackJsonpcadastro-produtos"]||[]).push([[0],{24:function(e,a,t){e.exports=t(36)},30:function(e,a,t){},36:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),l=t(20),o=t.n(l),s=(t(29),t(30),t(3));var c=function(){return n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},n.a.createElement(s.b,{className:"navbar-brand",to:"/"},"CRUD REACT"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarColor01"},n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item active"},n.a.createElement(s.b,{className:"nav-link",to:"/"},"Home ",n.a.createElement("span",{className:"sr-only"},"(current)"))),n.a.createElement("li",{className:"nav-item"},n.a.createElement(s.b,{className:"nav-link",to:"/cadastro-produtos"},"Cadastro")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(s.b,{className:"nav-link",to:"/consulta-produtos"},"Consulta")))))},m=t(6);var i=function(){return n.a.createElement("div",{className:"jumbotron"},n.a.createElement("h1",{className:"display-3"},"Bem Vindo!"),n.a.createElement("p",{className:"lead"},"Este \xe9 seu sistema, utilize a barra de navega\xe7\xe3o para acessar as p\xe1ginas."),n.a.createElement("hr",{className:"my-4"}),n.a.createElement("p",{className:"lead"},n.a.createElement(s.b,{className:"btn btn-primary btn-lg",to:"/cadastro-produtos",role:"button"},"Cadastrar")))},u=t(23),d=t(10),p=t(8),E=t(11),h=t(13),v=t(12),b=t(14),f=function(e){return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header"},e.header),n.a.createElement("div",{className:"card-body"},e.children))};function g(e){this.errors=e}var N=function e(){var a=this;Object(p.a)(this,e),this.validar=function(e){var a=[];if(e.nome||a.push("O campo Nome \xe9 obrigat\xf3rio!"),e.sku||a.push("O campo SKU \xe9 obrigat\xf3rio!"),(!e.preco||e.preco<=0)&&a.push("O campo Pre\xe7o deve ter um valor maior que 0!"),e.fornecedor||a.push("O campo Fornecedor \xe9 obrigat\xf3rio!"),a.length>0)throw new g(a)},this.obterProdutos=function(){var e=localStorage.getItem("_PRODUTOS");return e?JSON.parse(e):[]},this.obterIndex=function(e){var t=null;return a.obterProdutos().forEach((function(a,r){a.sku===e&&(t=r)})),t},this.deletar=function(e){var t=a.obterIndex(e);if(null!==t){var r=a.obterProdutos();return r.splice(t,1),localStorage.setItem("_PRODUTOS",JSON.stringify(r)),r}},this.salvar=function(e){a.validar(e);var t=localStorage.getItem("_PRODUTOS");t=t?JSON.parse(t):[];var r=a.obterIndex(e.sku);null===r?t.push(e):t[r]=e,localStorage.setItem("_PRODUTOS",JSON.stringify(t))}},O={nome:"",sku:"",descricao:"",preco:0,fornecedor:"",sucesso:!1,errors:[],atualizando:!1},C=function(e){function a(){var e;return Object(p.a)(this,a),(e=Object(h.a)(this,Object(v.a)(a).call(this))).state=O,e.onChangeHandler=function(a){var t=a.target.value,r=a.target.name;e.setState(Object(d.a)({},r,t))},e.onSubmitHandler=function(a){a.preventDefault();var t={nome:e.state.nome,sku:e.state.sku,descricao:e.state.descricao,preco:e.state.preco,fornecedor:e.state.fornecedor};e.state.sucesso&&e.setState({sucesso:!1});try{e.service.salvar(t),e.limpaCampos(),e.setState({sucesso:!0})}catch(n){var r=n.errors;e.setState({errors:r})}},e.limpaCampos=function(){e.state.atualizando||e.setState(O)},e.service=new N,e}return Object(b.a)(a,e),Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.sku;if(e){var a=this.service.obterProdutos().filter((function(a){return a.sku===e}));if(1===a.length){var t=a[0];this.setState(Object(u.a)({},t,{atualizando:!0}))}}}},{key:"render",value:function(){return n.a.createElement(f,{header:this.state.atualizando?n.a.createElement("h4",null,"Edi\xe7\xe3o de Produto"):n.a.createElement("h4",null,"Cadastro de Produto")},n.a.createElement("form",{id:"frmProduto",onSubmit:this.onSubmitHandler},this.state.sucesso?n.a.createElement("div",{className:"alert alert-dismissible alert-success"},this.state.atualizando?n.a.createElement(n.a.Fragment,null,n.a.createElement("strong",null,"Sucesso! "),"O produto foi atualizado."):n.a.createElement(n.a.Fragment,null,n.a.createElement("strong",null,"Sucesso! "),"O produto foi cadastrado corretamente.")):null,this.state.errors.length>0?this.state.errors.map((function(e,a){return n.a.createElement("div",{key:a,className:"alert alert-dismissible alert-danger"},n.a.createElement("strong",null,"Erro! "),e)})):null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Nome: *"),n.a.createElement("input",{type:"text",name:"nome",onChange:this.onChangeHandler,value:this.state.nome,className:"form-control"}))),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"SKU: *"),n.a.createElement("input",{type:"text",name:"sku",disabled:this.state.atualizando,onChange:this.onChangeHandler,value:this.state.sku,className:"form-control"})))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-12"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Descri\xe7\xe3o: "),n.a.createElement("textarea",{name:"descricao",onChange:this.onChangeHandler,value:this.state.descricao,className:"form-control"})))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Pre\xe7o: *"),n.a.createElement("input",{type:"text",name:"preco",onChange:this.onChangeHandler,value:this.state.preco,className:"form-control"}))),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Fornecedor: *"),n.a.createElement("input",{type:"text",name:"fornecedor",onChange:this.onChangeHandler,value:this.state.fornecedor,className:"form-control"})))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-auto mr-auto"},n.a.createElement("button",{title:"Cadastrar este produto",className:"btn btn-success",type:"submit"},this.state.atualizando?"Atualizar":"Salvar")),n.a.createElement("div",{className:"col-auto"},n.a.createElement("button",{disabled:this.state.atualizando,title:"Limpar todos os campos",className:"btn btn-primary",onClick:this.limpaCampos},"Limpar")))))}}]),a}(n.a.Component),k=Object(m.f)(C),y=function(e){return n.a.createElement("table",{className:"table table-hover"},n.a.createElement("thead",null,n.a.createElement("tr",{style:{color:"#000"}},n.a.createElement("th",null,"NOME"),n.a.createElement("th",null,"SKU"),n.a.createElement("th",null,"PRE\xc7O"),n.a.createElement("th",null,"FORNECEDOR"),n.a.createElement("th",null))),n.a.createElement("tbody",null,e.produtos.map((function(a,t){return n.a.createElement("tr",{key:t,style:t%2===0?{backgroundColor:"#FFF"}:{backgroundColor:"#DFD9D8"}},n.a.createElement("th",null,a.nome),n.a.createElement("th",null,a.sku),n.a.createElement("th",null,a.preco),n.a.createElement("th",null,a.fornecedor),n.a.createElement("th",null,n.a.createElement("button",{onClick:function(){return e.editarAction(a.sku)},style:{marginRight:5},className:"btn btn-primary btn-sm"},"Editar"),n.a.createElement("button",{onClick:function(){return e.deletarAction(a.sku)},className:"btn btn-danger btn-sm"},"Remover")))}))))},S=function(e){function a(){var e;return Object(p.a)(this,a),(e=Object(h.a)(this,Object(v.a)(a).call(this))).state={produtos:[],vazio:!1},e.preparaEditar=function(a){e.props.history.push("/cadastro-produtos/".concat(a))},e.deletar=function(a){var t=e.service.deletar(a);e.setState({produtos:t})},e.service=new N,e}return Object(b.a)(a,e),Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this.service.obterProdutos();0===e.length&&this.setState({vazio:!0}),this.setState({produtos:e})}},{key:"render",value:function(){return n.a.createElement(f,{header:n.a.createElement("h4",null,"Consulta de Produtos")},this.state.vazio?n.a.createElement("h5",{style:{textAlign:"center"}},"Nenhum produto cadastrado."):n.a.createElement(y,{produtos:this.state.produtos,editarAction:this.preparaEditar,deletarAction:this.deletar}))}}]),a}(n.a.Component),j=Object(m.f)(S),P=function(){return n.a.createElement(m.c,null,n.a.createElement(m.a,{exact:!0,path:"/cadastro-produtos/:sku?",component:k}),n.a.createElement(m.a,{exact:!0,path:"/consulta-produtos",component:j}),n.a.createElement(m.a,{exact:!0,path:"/",component:i}))};var x=function(){return n.a.createElement(s.a,null,n.a.createElement("div",{className:"container"},n.a.createElement(c,null),n.a.createElement(P,null)))};o.a.render(n.a.createElement(x,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.ee032235.chunk.js.map